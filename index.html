<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Birthday Surprise</title>
    <style>
        /* --- General Setup --- */
        body {
            margin: 0;
            padding: 0;
            background-color: #2d3436; /* Dark background for fireworks */
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Verdana', sans-serif;
            overflow: hidden;
            flex-direction: column;
            color: white;
        }

        /* --- Start Button Screen --- */
        #start-screen {
            position: absolute;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            background-color: #ffeaa7; /* Happy yellow intro */
            transition: opacity 0.8s ease;
        }

        button {
            padding: 15px 30px;
            font-size: 1.2rem;
            background-color: #ff7675;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* --- Main Scene --- */
        .scene {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            display: none; /* Hidden until clicked */
        }

        /* --- Fireworks Container --- */
        #fireworks-area {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 60%; 
            pointer-events: none;
            z-index: 20;
        }

        .particle {
            position: absolute;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            animation: explode 1s ease-out forwards;
        }

        @keyframes explode {
            0% { transform: translate(0, 0); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)); opacity: 0; }
        }

        /* --- The Birthday Message --- */
        .message-container {
            position: absolute;
            top: 15%; 
            text-align: center;
            opacity: 0;
            width: 100%;
            z-index: 10;
            transition: opacity 1s ease;
        }

        .message-container h1 {
            font-size: 3rem;
            color: #fab1a0;
            text-shadow: 0 0 10px #ff7675;
            margin: 0;
            font-family: 'Brush Script MT', cursive;
        }

        .message-container p {
            font-size: 1.2rem;
            color: #dfe6e9;
            margin-top: 10px;
        }

        /* --- The Cake --- */
        .cake {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 50px;
            transition: transform 1.5s ease-in-out;
        }

        /* Layers */
        .layer {
            background-color: #fab1a0; /* Sponge color */
            border-radius: 10px;
            position: relative;
            opacity: 0;
            box-shadow: inset 0 -5px 10px rgba(0,0,0,0.2);
        }

        /* Icing */
        .icing {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background-color: #fff;
            border-radius: 10px 10px 15px 15px;
        }
        
        .icing::before, .icing::after {
            content: '';
            position: absolute;
            background-color: #fff;
            border-radius: 0 0 10px 10px;
        }
        .icing::before { width: 10px; height: 15px; left: 20%; }
        .icing::after { width: 12px; height: 10px; right: 30%; }

        /* Sizes */
        .layer-bottom { width: 220px; height: 70px; z-index: 1; }
        .layer-middle { width: 170px; height: 60px; z-index: 2; margin-bottom: -5px; }
        .layer-top    { width: 120px; height: 50px; z-index: 3; margin-bottom: -5px; }

        /* Strawberries */
        .strawberry-cluster {
            position: absolute;
            top: -18px;
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 8px;
            z-index: 4;
            opacity: 0;
        }

        .strawberry {
            width: 20px;
            height: 24px;
            background-color: #e10e0e;
            border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
            position: relative;
            box-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .strawberry::after {
            content: '';
            position: absolute;
            top: -3px; left: 2px;
            width: 16px; height: 6px;
            background-color: #00b894;
            border-radius: 50%;
        }

        /* Candle */
        .candle {
            width: 8px;
            height: 30px;
            background: #74b9ff;
            position: absolute;
            top: -30px;
            z-index: 0;
            opacity: 0;
        }
        .flame {
            width: 12px;
            height: 18px;
            background: orange;
            border-radius: 50% 50% 20% 20%;
            position: absolute;
            top: -18px; left: -2px;
            animation: flicker 0.1s infinite alternate;
            box-shadow: 0 0 10px orange;
        }

        /* --- KEYFRAMES --- */
        @keyframes dropIn {
            0% { transform: translateY(-200px); opacity: 0; }
            60% { transform: translateY(10px); opacity: 1; }
            100% { transform: translateY(0); opacity: 1; }
        }
        @keyframes popIn {
            0% { transform: scale(0); opacity: 0; }
            80% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes flicker {
            from { opacity: 1; transform: scale(1); }
            to { opacity: 0.8; transform: scale(1.1); }
        }

        /* Animation Trigger Classes */
        .anim-drop { animation: dropIn 0.6s ease-out forwards; }
        .anim-pop { animation: popIn 0.5s ease-out forwards; }
        
        .slide-down-cake {
            transform: translateY(200px); /* Move cake down */
        }
        
        .show-text {
            opacity: 1;
            transform: translateY(0);
        }

    </style>
</head>
<body>

    <audio id="birthday-song" src="song.mp3" preload="auto"></audio>

    <div id="start-screen">
        <button onclick="startCelebration()">Click here to build the cake ðŸŽ‚</button>
    </div>

    <div class="scene" id="scene">
        
        <div id="fireworks-area"></div>

        <div class="message-container" id="message">
            <h1>Happy Birthday!</h1>
            <p>Happy birthday, darling! I hope you have a wonderful day. Sending you a big kiss!</p>
        </div>

        <div class="cake" id="cake">
            <div class="candle" id="candle"><div class="flame"></div></div>
            
            <div class="layer layer-top" id="top">
                <div class="icing"></div>
                <div class="strawberry-cluster" id="strawberries">
                    <div class="strawberry"></div>
                    <div class="strawberry"></div>
                    <div class="strawberry"></div>
                </div>
            </div>

            <div class="layer layer-middle" id="middle">
                <div class="icing"></div>
            </div>

            <div class="layer layer-bottom" id="bottom">
                <div class="icing"></div>
            </div>
        </div>
    </div>

    <script>
        function startCelebration() {
            // 1. PLAY MUSIC
            var audio = document.getElementById("birthday-song");
            audio.volume = 0.5; // Volumen al 50%
            audio.play().catch(error => {
                console.log("Audio play failed (user interaction needed first): ", error);
            });

            const startScreen = document.getElementById('start-screen');
            const scene = document.getElementById('scene');
            
            startScreen.style.opacity = '0';
            setTimeout(() => {
                startScreen.style.display = 'none';
                scene.style.display = 'flex';
                
                // --- SEQUENCE ---
                
                // 1. Build Cake
                setTimeout(() => document.getElementById('bottom').classList.add('anim-drop'), 100);
                setTimeout(() => document.getElementById('middle').classList.add('anim-drop'), 800);
                setTimeout(() => document.getElementById('top').classList.add('anim-drop'), 1500);
                
                // 2. Strawberries & Candle
                setTimeout(() => document.getElementById('strawberries').classList.add('anim-pop'), 2200);
                setTimeout(() => document.getElementById('candle').classList.add('anim-pop'), 2800);
                
                // 3. Move Cake Down & Show Text
                setTimeout(() => {
                    document.getElementById('cake').classList.add('slide-down-cake');
                }, 3800);

                setTimeout(() => {
                    document.getElementById('message').classList.add('show-text');
                }, 4500);

                // 4. FIREWORKS! (Start after text appears)
                setTimeout(() => {
                    launchFireworks();
                }, 5000);

            }, 500);
        }

        // --- Fireworks Logic ---
        function launchFireworks() {
            const container = document.getElementById('fireworks-area');
            const colors = ['#ff7675', '#74b9ff', '#55efc4', '#ffeaa7', '#a29bfe'];
            
            // Create random explosions
            let count = 0;
            const interval = setInterval(() => {
                const xPos = Math.random() * 80 + 10; // Random horizontal position
                const yPos = Math.random() * 50 + 10; // Random vertical position
                createExplosion(container, xPos, yPos, colors);
                
                count++;
                if(count > 8) clearInterval(interval); // Stop after 8 bursts
            }, 800);
        }

        function createExplosion(container, x, y, colors) {
            const particleCount = 30; 
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                particle.style.left = x + '%';
                particle.style.top = y + '%';
                
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 100 + 60; 
                const tx = Math.cos(angle) * velocity + 'px';
                const ty = Math.sin(angle) * velocity + 'px';
                
                particle.style.setProperty('--tx', tx);
                particle.style.setProperty('--ty', ty);
                
                container.appendChild(particle);
                
                setTimeout(() => particle.remove(), 1000);
            }
        }
    </script>
</body>

</html>
